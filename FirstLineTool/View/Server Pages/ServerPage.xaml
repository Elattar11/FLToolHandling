<Page x:Class="FirstLineTool.View.Server_Pages.ServerPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:FirstLineTool.View.Server_Pages"
      mc:Ignorable="d" 
      Loaded="Page_Loaded"
      d:DesignHeight="450" d:DesignWidth="800"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" xmlns:fa="http://schemas.fontawesome.io/icons/" xmlns:Icon="http://metro.mahapps.com/winfx/xaml/iconpacks"
      FontFamily="{DynamicResource MaterialDesignFont}"
      Title="ServerPage">

    <DockPanel Background="White" LastChildFill="True" VerticalAlignment="Top">

        <Grid DockPanel.Dock="Top" Margin="20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <!-- شمال -->
                <ColumnDefinition Width="Auto"/>
                <!-- يمين -->
            </Grid.ColumnDefinitions>


            <StackPanel Orientation="Vertical" Grid.Column="0" HorizontalAlignment="Left">

                <!-- ✅ صف للكومبو بوكسات -->
                <Grid Margin="0,0,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="20"/>
                        <!-- مسافة بينهم -->
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <ComboBox x:Name="cbxCommands"
                        Width="250"
                        PreviewKeyUp="cbxCommands_PreviewKeyUp"
                        IsEditable="True"
                        IsTextSearchEnabled="False"
                        StaysOpenOnEdit="True"
                        TextSearch.TextPath="Display"
                        SelectionChanged="cbxCommands_SelectionChanged"
                        Style="{StaticResource MaterialDesignOutlinedComboBox}"
                        materialDesign:HintAssist.Hint="Select Command"
                        Grid.Column="0" VerticalAlignment="Bottom"/>

                </Grid>

            </StackPanel>
            <!-- ✅ الزرارين على اليمين -->
            <StackPanel Orientation="Horizontal" Grid.Column="1" HorizontalAlignment="Right" VerticalAlignment="Top">

                

                <Button Content="Paths"
                x:Name="btnConnections"
                
                Foreground="#ffffff"
                Background="#b9052f"
                materialDesign:ButtonAssist.CornerRadius="16"
                Style="{StaticResource MaterialDesignRaisedButton}"
                Width="150"
                Margin="0,0,10,0" Click="btnConnections_Click"/>

                <Button Content="Parameters"
                        x:Name="btnParameters"
                          Foreground="#ffffff"
                          Background="#b9052f"
                          materialDesign:ButtonAssist.CornerRadius="16"
                          Style="{StaticResource MaterialDesignRaisedButton}"
                          Width="150" Click="Button_Click" />


                <Button Name="btnSettings"
                        Style="{StaticResource topButton}"
                        Margin="10,0,10,0"
                        Click="btnSettings_Click"
                       >
                    <Icon:PackIconMaterial Kind="Cog" Width="14" Height="14"/>
                </Button>

                <Button Name="btnRefresh"
                    Style="{StaticResource topButton}"
                    Margin="0,0,10,0"
                    Click="btnRefresh_Click">
                    <Icon:PackIconMaterial Kind="Refresh" Width="14" Height="14"/>
                </Button>




            </StackPanel>
        </Grid>

        <!-- ✅ StackPanel برّه الجريد ومعاه Scroll أفقي -->
        <Border BorderBrush="#b9052f"
            BorderThickness="1.5"
            CornerRadius="5"
            Margin="20,0,20,10"
            Background="White"
            DockPanel.Dock="Top"
            Padding="10">

            <StackPanel>

                <!-- ✅ Header باللون الأحمر -->
                <Border 
            Padding="6,3"
            CornerRadius="3"
            HorizontalAlignment="Center"
            Margin="0,0,0,5">
                    <TextBlock Text="Required Parameters"
                   Foreground="#b9052f"
                   FontWeight="Bold"
                   FontSize="13"/>
                </Border>

                <!-- ✅ Scroll جوا البانل -->
                <ScrollViewer HorizontalScrollBarVisibility="Auto"
                  VerticalScrollBarVisibility="Disabled">
                    <StackPanel x:Name="ParametersPanel"
                    Orientation="Horizontal"
                    HorizontalAlignment="Left"
                    Margin="0"/>
                </ScrollViewer>

            </StackPanel>
            
            
        </Border>



        <StackPanel DockPanel.Dock="Top"
            Orientation="Vertical"
            HorizontalAlignment="Center"
            Margin="0,10,0,10">

            <!-- زرار Run -->
            <Button Content="Run Command"
            Click="Button_ClickAsync"
            Background="Black"
            Foreground="White"
            BorderThickness="0"
            x:Name="btnRun"
            Width="250"
            Height="40"
            HorizontalAlignment="Center"
            materialDesign:ButtonAssist.CornerRadius="12"
            Style="{StaticResource MaterialDesignRaisedButton}"/>

            <!-- 🔄 Spinner تحت الزرار مباشرة -->
            <ProgressBar x:Name="pbLoading"
                 Width="45"
                 Height="45"
                 IsIndeterminate="True"
                 Visibility="Collapsed"
                 Margin="0,10,0,0"
                 HorizontalAlignment="Center"
                 Style="{StaticResource MaterialDesignCircularProgressBar}"/>
        </StackPanel>

        <Border BorderBrush="#b9052f"
            BorderThickness="1"
            CornerRadius="5"
            Margin="20,0,20,20"
            Background="White"
            Padding="10">
            <ScrollViewer VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      VerticalContentAlignment="Top">
                <StackPanel x:Name="StatusPanel"
                        Orientation="Vertical"
                        VerticalAlignment="Top"
                        HorizontalAlignment="Stretch"
                        Margin="0" />
            </ScrollViewer>
        </Border>


    </DockPanel>
</Page>
